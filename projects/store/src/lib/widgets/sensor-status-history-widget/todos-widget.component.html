<div class="relative p-4 h-full flex flex-col">
  <div class="pb-2.5 border-b-2 border-purple-500 flex items-center justify-between">
    <div class="font-semibold text-lg">Switch History</div>
  </div>

  <div class="mt-3 overflow-y-auto grow">
    <table mat-table [dataSource]="historyDataSource" class="not-mat-typography table">

      <!-- ID Column (reducido) -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef class="text-neutral-500 dark:text-neutral-400 w-1/12">ID</th>
        <td mat-cell *matCellDef="let element" class="text-xs text-gray-600 dark:text-gray-300 truncate max-w-[20px]">
          {{ element.id }}
        </td>
      </ng-container>

      <!-- Estado Column -->
      <ng-container matColumnDef="switchOutput">
        <th mat-header-cell *matHeaderCellDef class="text-neutral-500 dark:text-neutral-400 w-1/4">Estado</th>
        <td mat-cell *matCellDef="let element">
          <div class="flex items-center">
            <mat-icon class="text-2xl"
                      [ngClass]="element.switchOutput ? 'text-green-500' : 'text-red-500'">
              {{ element.switchOutput ? 'toggle_on' : 'toggle_off' }}
            </mat-icon>
            <span class="ml-2 font-semibold text-sm"
                  [ngClass]="element.switchOutput ? 'text-green-600' : 'text-red-600'">
              {{ element.switchOutput ? 'Encendido' : 'Apagado' }}
            </span>
          </div>
        </td>
      </ng-container>

      <!-- Fecha de Cambio Column (formato dd/MM/yyyy HH:mm:ss) -->
      <ng-container matColumnDef="changedAt">
        <th mat-header-cell *matHeaderCellDef class="text-neutral-500 dark:text-neutral-400 w-1/6">Fecha de Cambio</th>
        <td mat-cell *matCellDef="let element" class="text-sm text-gray-700 dark:text-gray-300">
          {{ element.changedAt | date:'dd/MM/yyyy HH:mm:ss' }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"
          class="hover:bg-primary-50 dark:hover:bg-neutral-700 row border-b">
      </tr>
    </table>
  </div>
</div>
